t%
(base)
flash-sale on î‚  main [!?] via ðŸ¹ v1.25.6
â¯ make test
go test -v ./test/concurrent_test.go
=== RUN   TestConcurrent_OversellPrevention
    concurrent_test.go:104: âœ… æµ‹è¯•æ•°æ®åˆå§‹åŒ–å®Œæˆ: 7000ä¸ªç”¨æˆ·, 1ä¸ªåœºæ¬¡, æ¯åœº100å¼ ç¥¨
    concurrent_test.go:250:
        ðŸŽ¯ åœºæ™¯1: æžé™æŠ¢ç¥¨æµ‹è¯•
    concurrent_test.go:251: ç¥¨æ•°: 100, å¹¶å‘ç”¨æˆ·: 7000
    concurrent_test.go:215:
        ============================================================
    concurrent_test.go:216: ðŸ“Š åœºæ™¯1: è¶…å–æµ‹è¯• - æµ‹è¯•ç»“æžœ
    concurrent_test.go:217: ============================================================
    concurrent_test.go:218: âœ… æˆåŠŸé¢„è®¢: 100
    concurrent_test.go:219: ðŸ”´ å·²å”®ç½„: 6900
    concurrent_test.go:220: ðŸ” é‡å¤é¢„è®¢: 0
    concurrent_test.go:221: âŒ å…¶ä»–é”™è¯¯: 0
    concurrent_test.go:222: ðŸ“ˆ æ€»è¯·æ±‚æ•°: 7000
    concurrent_test.go:223: â±ï¸  æ€»è€—æ—¶: 1.560405667s
    concurrent_test.go:224: âš¡ å¹³å‡å“åº”æ—¶é—´: 849.666919ms
    concurrent_test.go:225: ðŸš€ QPS: 4486.01
    concurrent_test.go:226: ============================================================
    concurrent_test.go:263: âœ… è¶…å–æ£€æµ‹é€šè¿‡ï¼
è®¢ç¥¨å·²å®Œæˆï¼Œç­‰å¾…3ç§’ä¿è¯æ•°æ®åº“å†™å…¥å®Œæˆ
    concurrent_test.go:236: âœ… æ•°æ®åº“éªŒè¯é€šè¿‡: 100 æ¡è®¢å•
--- PASS: TestConcurrent_OversellPrevention (6.31s)
=== RUN   TestConcurrent_IdempotencyCheck
    concurrent_test.go:104: âœ… æµ‹è¯•æ•°æ®åˆå§‹åŒ–å®Œæˆ: 10ä¸ªç”¨æˆ·, 1ä¸ªåœºæ¬¡, æ¯åœº10å¼ ç¥¨
    concurrent_test.go:288:
        ðŸŽ¯ åœºæ™¯2: åŒä¸€ç”¨æˆ·å¹‚ç­‰æ€§æµ‹è¯•
    concurrent_test.go:289: ç”¨æˆ·1 å‘èµ· 20 ä¸ªå¹¶å‘è¯·æ±‚
    concurrent_test.go:215:
        ============================================================
    concurrent_test.go:216: ðŸ“Š åœºæ™¯2: å¹‚ç­‰æ€§æµ‹è¯• - æµ‹è¯•ç»“æžœ
    concurrent_test.go:217: ============================================================
    concurrent_test.go:218: âœ… æˆåŠŸé¢„è®¢: 1
    concurrent_test.go:219: ðŸ”´ å·²å”®ç½„: 0
    concurrent_test.go:220: ðŸ” é‡å¤é¢„è®¢: 19
    concurrent_test.go:221: âŒ å…¶ä»–é”™è¯¯: 0
    concurrent_test.go:222: ðŸ“ˆ æ€»è¯·æ±‚æ•°: 20
    concurrent_test.go:223: â±ï¸  æ€»è€—æ—¶: 49.736333ms
    concurrent_test.go:224: âš¡ å¹³å‡å“åº”æ—¶é—´: 41.748837ms
    concurrent_test.go:225: ðŸš€ QPS: 402.12
    concurrent_test.go:226: ============================================================
    concurrent_test.go:301: âœ… å¹‚ç­‰æ€§æ£€æµ‹é€šè¿‡ï¼
è®¢ç¥¨å·²å®Œæˆï¼Œç­‰å¾…3ç§’ä¿è¯æ•°æ®åº“å†™å…¥å®Œæˆ
    concurrent_test.go:236: âœ… æ•°æ®åº“éªŒè¯é€šè¿‡: 1 æ¡è®¢å•
--- PASS: TestConcurrent_IdempotencyCheck (4.36s)
=== RUN   TestConcurrent_MultipleShowtimes
    concurrent_test.go:104: âœ… æµ‹è¯•æ•°æ®åˆå§‹åŒ–å®Œæˆ: 3000ä¸ªç”¨æˆ·, 3ä¸ªåœºæ¬¡, æ¯åœº50å¼ ç¥¨
    concurrent_test.go:325:
        ðŸŽ¯ åœºæ™¯3: å¤šåœºæ¬¡æ··åˆæµ‹è¯•
    concurrent_test.go:326: 3ä¸ªåœºæ¬¡, æ¯åœº50å¼ ç¥¨, æ€»å¹¶å‘: 3000
è®¢ç¥¨å·²å®Œæˆï¼Œç­‰å¾…3ç§’ä¿è¯æ•°æ®åº“å†™å…¥å®Œæˆ
    concurrent_test.go:215:
        ============================================================
    concurrent_test.go:216: ðŸ“Š åœºæ™¯3-åœºæ¬¡1 - æµ‹è¯•ç»“æžœ
    concurrent_test.go:217: ============================================================
    concurrent_test.go:218: âœ… æˆåŠŸé¢„è®¢: 50
    concurrent_test.go:219: ðŸ”´ å·²å”®ç½„: 950
    concurrent_test.go:220: ðŸ” é‡å¤é¢„è®¢: 0
    concurrent_test.go:221: âŒ å…¶ä»–é”™è¯¯: 0
    concurrent_test.go:222: ðŸ“ˆ æ€»è¯·æ±‚æ•°: 1000
    concurrent_test.go:223: â±ï¸  æ€»è€—æ—¶: 606.372625ms
    concurrent_test.go:224: âš¡ å¹³å‡å“åº”æ—¶é—´: 288.404285ms
    concurrent_test.go:225: ðŸš€ QPS: 1649.15
    concurrent_test.go:226: ============================================================
    concurrent_test.go:236: âœ… æ•°æ®åº“éªŒè¯é€šè¿‡: 50 æ¡è®¢å•
    concurrent_test.go:215:
        ============================================================
    concurrent_test.go:216: ðŸ“Š åœºæ™¯3-åœºæ¬¡2 - æµ‹è¯•ç»“æžœ
    concurrent_test.go:217: ============================================================
    concurrent_test.go:218: âœ… æˆåŠŸé¢„è®¢: 50
    concurrent_test.go:219: ðŸ”´ å·²å”®ç½„: 950
    concurrent_test.go:220: ðŸ” é‡å¤é¢„è®¢: 0
    concurrent_test.go:221: âŒ å…¶ä»–é”™è¯¯: 0
    concurrent_test.go:222: ðŸ“ˆ æ€»è¯·æ±‚æ•°: 1000
    concurrent_test.go:223: â±ï¸  æ€»è€—æ—¶: 591.847625ms
    concurrent_test.go:224: âš¡ å¹³å‡å“åº”æ—¶é—´: 406.865622ms
    concurrent_test.go:225: ðŸš€ QPS: 1689.62
    concurrent_test.go:226: ============================================================
    concurrent_test.go:236: âœ… æ•°æ®åº“éªŒè¯é€šè¿‡: 50 æ¡è®¢å•
    concurrent_test.go:215:
        ============================================================
    concurrent_test.go:216: ðŸ“Š åœºæ™¯3-åœºæ¬¡3 - æµ‹è¯•ç»“æžœ
    concurrent_test.go:217: ============================================================
    concurrent_test.go:218: âœ… æˆåŠŸé¢„è®¢: 50
    concurrent_test.go:219: ðŸ”´ å·²å”®ç½„: 950
    concurrent_test.go:220: ðŸ” é‡å¤é¢„è®¢: 0
    concurrent_test.go:221: âŒ å…¶ä»–é”™è¯¯: 0
    concurrent_test.go:222: ðŸ“ˆ æ€»è¯·æ±‚æ•°: 1000
    concurrent_test.go:223: â±ï¸  æ€»è€—æ—¶: 542.95925ms
    concurrent_test.go:224: âš¡ å¹³å‡å“åº”æ—¶é—´: 183.597606ms
    concurrent_test.go:225: ðŸš€ QPS: 1841.76
    concurrent_test.go:226: ============================================================
    concurrent_test.go:236: âœ… æ•°æ®åº“éªŒè¯é€šè¿‡: 50 æ¡è®¢å•
    concurrent_test.go:363:
        ðŸ“Š å¤šåœºæ¬¡æ€»ç»“: æ€»æˆåŠŸé¢„è®¢ 150 ç¬”
--- PASS: TestConcurrent_MultipleShowtimes (5.57s)
PASS
ok  	command-line-arguments	17.009s
(base)
flash-sale on î‚  main [!?] via ðŸ¹ v1.25.6 took 18s
â¯ tmux capture-pane -S - -E - -p > tmux.log


